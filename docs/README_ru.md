# requesto

[![Go Reference](https://pkg.go.dev/badge/github.com/Kaguya233qwq/requesto.svg)](https://pkg.go.dev/github.com/Kaguya233qwq/requesto)

[[English](../README.md)] | [[ÁÆÄ‰Ωì‰∏≠Êñá](/docs/README_zh-CN.md)] | [[ÁπÅÈ´î‰∏≠Êñá](/docs/README_zh-TW.md)] | [[Êó•Êú¨Ë™û](/docs/README_ja.md)] | [[ÌïúÍµ≠Ïñ¥](/docs/README_ko.md)] | –†—É—Å—Å–∫–∏–π | [[Espa√±ol](/docs/README_es.md)] | [[Deutsch](/docs/README_de.md)]

> [!TIP]
> –≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ. –ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å —Ö–æ—Ä–æ—à–∏–µ –∏–¥–µ–∏ –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, –º—ã –±—É–¥–µ–º —Ä–∞–¥—ã, –µ—Å–ª–∏ –≤—ã —Å–æ–∑–¥–∞–¥–∏—Ç–µ Issue –∏–ª–∏ Pull Request.

`requesto` ‚Äî —ç—Ç–æ —ç–ª–µ–≥–∞–Ω—Ç–Ω–∞—è –∏ –º–æ—â–Ω–∞—è HTTP-–∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —è–∑—ã–∫–∞ Go. –û–Ω–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `net/http` –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç API —Å —Ü–µ–ø–æ—á–µ—á–Ω—ã–º–∏ –≤—ã–∑–æ–≤–∞–º–∏, –º–æ—â–Ω—É—é —Å–∏—Å—Ç–µ–º—É –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ –ü–û (middleware) –∏ —Ä—è–¥ —É–¥–æ–±–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π. –¶–µ–ª—å `requesto` ‚Äî —Å–¥–µ–ª–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ–π –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∏ —É–ª—É—á—à–∏—Ç—å –æ–ø—ã—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

## üß† –û –Ω–∞–∑–≤–∞–Ω–∏–∏

- 1. –°—É—â–µ—Å—Ç–≤—É–µ—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –±–∏–±–ª–∏–æ—Ç–µ–∫ —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º `requests`.
- 2. –ù–∞–∑–≤–∞–Ω–∏–µ –∑–≤—É—á–∏—Ç –∂–∏–≤–æ –∏ —Å—Ç—Ä–∞—Å—Ç–Ω–æ, –≤ –¥—É—Ö–µ —Ä–æ–º–∞–Ω—Å–∫–∏—Ö —è–∑—ã–∫–æ–≤, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –µ–≥–æ –ø—Ä–∏—è—Ç–Ω—ã–º –∏ –∑–∞–ø–æ–º–∏–Ω–∞—é—â–∏–º—Å—è.
- 3. –ï–≥–æ —Ç–∞–∫–∂–µ –º–æ–∂–Ω–æ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫ —Å–æ—á–µ—Ç–∞–Ω–∏–µ `request` + `go`.

## ‚≠ê –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

*   üì¶Ô∏è –ì–æ—Ç–æ–≤—ã–µ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –ø—Ä–æ—Å—Ç—ã–µ –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤, –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤.
*   ‚ú® –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω—ã–π API —Å —Ü–µ–ø–æ—á–µ—á–Ω—ã–º–∏ –≤—ã–∑–æ–≤–∞–º–∏, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–π —è—Å–Ω–æ—Å—Ç—å –∏ –ø–ª–∞–≤–Ω–æ—Å—Ç—å –∫–æ–¥–∞.
*   üöÄ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ JSON, x-www-form-urlencoded, –±–∏–Ω–∞—Ä–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤.
*   üç™ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏ —Å –ø–æ–º–æ—â—å—é `CookieJar`.
*   ‚è±Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–∞—É—Ç–∞–º–∏ –∏ –æ—Ç–º–µ–Ω–æ–π —á–µ—Ä–µ–∑ `Context`.
*   üîß –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –∫–ª–∏–µ–Ω—Ç (—Ç–∞–π–º–∞—É—Ç—ã, –ø–æ–ª–∏—Ç–∏–∫–∞ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤ –∏ —Ç.–¥.).
*   üßÖ –ú–æ—â–Ω–∞—è –∏ –ø—Ä–æ—Å—Ç–∞—è –≤ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ –ü–û (—Ö—É–∫–æ–≤).

## üíø –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
go get github.com/Kaguya233qwq/requesto
```

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–û—Ç–ø—Ä–∞–≤—å—Ç–µ –∑–∞–ø—Ä–æ—Å –∏ —Ä–∞–∑–±–µ—Ä–∏—Ç–µ JSON-–æ—Ç–≤–µ—Ç –≤—Å–µ–≥–æ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å—Ç—Ä–æ–∫–∞—Ö –∫–æ–¥–∞:

```go
package main

import (
	"fmt"
	"log"

	"github.comcom/Kaguya233qwq/requesto"
)

func main() {
	resp, err := requesto.Get("https://httpbingo.org/get")
	if err != nil {
		log.Fatalf("–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞: %v", err)
	}
	fmt.Printf("–ö–æ–¥ —Å–æ—Å—Ç–æ—è–Ω–∏—è: %d\n", resp.StatusCode())
	// –ü–∞—Ä—Å–∏–Ω–≥ —Ç–µ–ª–∞ –æ—Ç–≤–µ—Ç–∞ –≤ map
	jsonData, _ := resp.Json()
	fmt.Printf("Args from server: %v\n", jsonData["args"])
}
```

## üìö –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### üöÄ –ü—Ä—è–º—ã–µ –∑–∞–ø—Ä–æ—Å—ã

#### –ü–µ—Ä–µ–¥–∞—á–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∑–∞–ø—Ä–æ—Å–∞ (Query)

```go
params := requesto.Params{"q": "1"}
resp, err = requesto.Get("https://example.com", params)
if err != nil {
	log.Fatalf("–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞: %v", err)
}
fmt.Printf("–ö–æ–¥ —Å–æ—Å—Ç–æ—è–Ω–∏—è: %d\n", resp.StatusCode())
```
#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ (Headers)

```go
params := requesto.Params{"q": "1"}
headers := requesto.Headers{"Accept": "text/html,application"}
resp, err = requesto.Get("https://example.com", params, headers)
if err != nil {
	log.Fatalf("–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞: %v", err)
}
fmt.Printf("–ö–æ–¥ —Å–æ—Å—Ç–æ—è–Ω–∏—è: %d\n", resp.StatusCode())
```

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã (Form)

```go
form := requesto.AsForm(map[string]string{"arg1": "value1"})
resp, err = requesto.Post("https://example.com", form)
if err != nil {
	log.Fatalf("–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞: %v", err)
}
fmt.Printf("–ö–æ–¥ —Å–æ—Å—Ç–æ—è–Ω–∏—è: %d\n", resp.StatusCode())
```

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ JSON

```go
json := requesto.AsJson(map[string]any{"arg1": "value1", "arg2": 0})
resp, err = requesto.Post("https://example.com", json)
if err != nil {
	log.Fatalf("–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞: %v", err)
}
fmt.Printf("–ö–æ–¥ —Å–æ—Å—Ç–æ—è–Ω–∏—è: %d\n", resp.StatusCode())
```


### üõ†Ô∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞

–ö–ª–∏–µ–Ω—Ç (`Client`) —è–≤–ª—è–µ—Ç—Å—è –º–Ω–æ–≥–æ—Ä–∞–∑–æ–≤—ã–º. –û–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—É–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π, `CookieJar` –∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –µ–≥–æ –ø–æ—Ö–æ–∂–∏–º –Ω–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω—É—é —Å–µ—Å—Å–∏—é.

#### –ö–ª–∏–µ–Ω—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

```go
client := requesto.NewClient("https://example.com")
```

#### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∫–ª–∏–µ–Ω—Ç

`NewClient` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–∞–π–º–∞—É—Ç–æ–≤, –ø–æ–ª–∏—Ç–∏–∫–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤ –∏ —Ç.–¥.

```go
client := requesto.NewClient(
    "https://example.com",
    requesto.WithTimeout(10*time.Second),      // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Ç–∞–π–º–∞—É—Ç 10 —Å–µ–∫—É–Ω–¥
    requesto.WithFollowRedirects(false),     // –ó–∞–ø—Ä–µ—Ç–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–¥–∏—Ä–µ–∫—Ç—ã
)
```

–ú–Ω–æ–≥–∏–µ –∞—Ç—Ä–∏–±—É—Ç—ã –∫–ª–∏–µ–Ω—Ç–∞ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –∏ –∏–∑–º–µ–Ω—è—Ç—å –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –∑–∞–ø—Ä–æ—Å–∞:

```go
client := requesto.NewClient("https://example.com")
// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
client.Headers.Set("Content-Type", "text/html; charset=utf-8")
// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∑–∞–ø—Ä–æ—Å–∞
client.Params = map[string]string{
    "page": "1",
    "size": "10",
}
// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ cookie –≤ —Ñ–æ—Ä–º–∞—Ç–µ –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ
client.SetCookiesFromMap(
    map[string]string{
        "__token": "xyz",
    },
)
client.Get()
```

#### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `NewRequest()` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏–µ–π:

```go
client := requesto.NewClient("https://api.example.com")
req1 := client.NewRequest()
req2 := client.NewRequest()
// –ó–∞–ø—Ä–æ—Å—ã –æ—Ç –æ–¥–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–±—â–∏–π –ø—É–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π, –Ω–æ –Ω–µ –º–µ—à–∞—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥—É
```

–¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –Ω–∞–ø—Ä—è–º—É—é:

```go
client := requesto.NewClient("https://example.com")
resp, err := client.Get()
```

#### –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞

–í —Ä–µ–∂–∏–º–µ –∫–ª–∏–µ–Ω—Ç–∞ `requesto` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–æ—Å–æ–±–æ–≤ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞.

#### –û—Ç–ø—Ä–∞–≤–∫–∞ JSON

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ `map[string]any`:

```go
type User struct {
    Name string `json:"name"`
    Age  int    `json:"age"`
}

user := User{Name: "Alice", Age: 20}
client := requesto.NewClient("https://example.com")
resp, err := client.NewRequest().
    JoinPath("/api"). // –ú–µ—Ç–æ–¥ JoinPath –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—É—Ç–∏
    SetJsonData(user). // –ú–æ–∂–µ—Ç –±—ã—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –∏–ª–∏ map
    Post()
```

```go
user := map[string]any{"name": "Alice","age": 20}
client := requesto.NewClient("https://example.com")
resp, err := client.NewRequest().
    JoinPath("/api").
    SetJsonData(user).
    Post()
```

#### –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã

```go
formData := map[string]string{
    "username": "bob",
    "password": "123",
}

resp, err := client.NewRequest().
    JoinPath("/login").
    SetFormData(formData).
    Post()
```

#### –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤

```go
resp, err := client.NewRequest().
    JoinPath("/api").
    SetFormData(map[string]string{
        "user_id": "123",
    }).
    SetFiles(map[string]string{
        "upload_file": "hello.txt",
    }).
    Post()
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞

–û–±—ä–µ–∫—Ç `Response` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ç–µ–ª–∞ –æ—Ç–≤–µ—Ç–∞.

```go
resp, _ := client.NewRequest().Get()

// –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–¥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –æ—Ç–≤–µ—Ç–∞
statusCode := resp.StatusCode()
headers := resp.Headers()

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–ª–∞ –æ—Ç–≤–µ—Ç–∞
text, _ := resp.Text()
bytes, _ := resp.Bytes()

// –ü–∞—Ä—Å–∏–Ω–≥ JSON
jsonData, _ := resp.Json()

// –ü–∞—Ä—Å–∏–Ω–≥ Cookie –∏–∑ –æ—Ç–≤–µ—Ç–∞
cookies := resp.Cookies()
cookiesMap := resp.CookiesMap()
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Cookie

–í `Client` –≤—Å—Ç—Ä–æ–µ–Ω `CookieJar`, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–µ—Å—Å–∏—è–º–∏.

```go
client.NewRequest().JoinPath("/cookies/set").SetParams(map[string]string{
    "session_id": "my_secret_session",
}).Get()

// –ü—Ä–∏ –¥–æ—Å—Ç—É–ø–µ –∫ –∑–∞—â–∏—â–µ–Ω–Ω—ã–º —Ä–µ—Å—É—Ä—Å–∞–º cookie –±—É–¥—É—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –æ—Ç–ø—Ä–∞–≤–∏—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ set-cookie
resp, _ := client.NewRequest().JoinPath("/login").Get()
cookies := resp.Cookies()

// –¢–∞–∫–∂–µ –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Cookie –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞ –≤—Ä—É—á–Ω—É—é
client.SetCookiesFromMap(map[string]string{
    "token": "123",
})
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Context –¥–ª—è —Ç–∞–π–º–∞—É—Ç–æ–≤ –∏ –æ—Ç–º–µ–Ω—ã

–ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `NewRequestWithContext`, —á—Ç–æ–±—ã –ø–µ—Ä–µ–¥–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ç–∞–π–º–∞—É—Ç–∞ –∏–ª–∏ —Å–∏–≥–Ω–∞–ª–∞ –æ—Ç–º–µ–Ω—ã –¥–ª—è –æ–¥–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞.

```go
// –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–º–µ–Ω–∏—Ç—Å—è —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)
defer cancel()

// –≠—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è –Ω–µ—É–¥–∞—á–Ω–æ –∏–∑-–∑–∞ —Ç–∞–π–º–∞—É—Ç–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
_, err := client.NewRequestWithContext(ctx).
    JoinPath("/delay/3").
    Get()

if errors.Is(err, context.DeadlineExceeded) {
    fmt.Println("–¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–∞")
}
```

## –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏: –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ –ü–û (Middleware)

–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ –ü–û (middleware) ‚Äî –æ–¥–Ω–∞ –∏–∑ –º–æ—â–Ω—ã—Ö –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π `requesto`, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è –≤—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é –ª–æ–≥–∏–∫—É –¥–æ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ –∏ –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞.

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ –ü–û

`requesto` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≥–æ—Ç–æ–≤—ã–µ middleware, —Ç–∞–∫–∏–µ –∫–∞–∫ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ (retry) –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.

```go
import "github.com/Kaguya233qwq/requesto/middleware"

client := requesto.NewClient("http://example.com")

client.Use(
    middleware.NewLogger(
        middleware.WithLevel(middleware.LevelDebug),
        middleware.WithHeaders(true),
    ),
    middleware.NewRetrier(
        middleware.WithRetryCount(3),
        middleware.WithRetryOnServerErrors(),
    ),
)
```

### –ù–∞–ø–∏—Å–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ –ü–û

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Å—Ç–æ–≥–æ middleware —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä `NewHook`.

- #### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `NewHook`

–ü—Ä–∏–º–µ—Ä middleware, –∫–æ—Ç–æ—Ä–æ–µ –¥–æ–±–∞–≤–ª—è–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –∑–∞–ø—Ä–æ—Å–æ–º:

```go
func AuthMiddleware(token string) requesto.Middleware {
    return middleware.NewHook(
        middleware.WithBeforeRequest(func(req *requesto.Request) error {
            req.SetHeader(map[string]string{
                "Authorization": "Bearer " + token,
            })
            return nil
        }),
    )
}

client.Use(AuthMiddleware("my_secret_token"))
```

- #### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

–î–ª—è –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏, —Ç—Ä–µ–±—É—é—â–µ–π —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Ç–æ–∫–æ–º –∑–∞–ø—Ä–æ—Å–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ), –≤—ã –º–æ–∂–µ—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `requesto.Middleware`:

```go
func MyComplexMiddleware() requesto.Middleware {
    return func(req *requesto.Request, next requesto.Next) (*requesto.Response, error) {
        // –õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–¥ –∑–∞–ø—Ä–æ—Å–æ–º...

        // –í—ã–∑–æ–≤ —Å–ª–µ–¥—É—é—â–µ–≥–æ middleware –≤ —Ü–µ–ø–æ—á–∫–µ
        resp, err := next(req)

        // –õ–æ–≥–∏–∫–∞ –ø–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞...

        return resp, err
    }
}
```

## üìú –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT.

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

–ú—ã –±–ª–∞–≥–æ–¥–∞—Ä–∏–º —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–æ–µ–∫—Ç—ã –∑–∞ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ –∏ –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞. –ë–ª–∞–≥–æ–¥–∞—Ä—è –≤–∞—à–µ–º—É —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—é —Å–æ–æ–±—â–µ—Å—Ç–≤–æ –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ª—É—á—à–µ.

*   [earthboundkid/requests](https://github.com/earthboundkid/requests)
*   [asmcos/requests](https://github.com/asmcos/requests)